function calcularSouNet(e){var t,n,i,s,l,a,c,r,u,o,d,m,I,E,h,S,g,B,D,C,_,y,v,O,M,N,F,f,P=18;t=e.getElementById("edat").value,_=e.getElementById("SB").value,O=e.getElementById("sNumPagues").value,i=e.getElementById("CONTRACTEINDEFINIT").checked,s=e.getElementById("CAT_PROF").value,l=e.getElementById("SIT_FAM").value,a=e.getElementById("MOV_GEO").checked,f=e.getElementsByName("discp");for(var A=0;A<f.length;A++)f.item(A).checked===!0&&(c=f.item(A).value);if(r=e.getElementById("MOV_RED").checked,u=e.getElementById("DESC").value,o=e.getElementById("less3Years").value,d=e.getElementById("EXCLUSIVE").checked,m=e.getElementById("MDISCPDL65").value,E=e.getElementById("MDISCPD_MOV").value,I=e.getElementById("MDISCPDM65").value,h=e.getElementById("ASC65").value,S=e.getElementById("ASC75").value,g=e.getElementById("LESS65DISC").value,B=e.getElementById("MDISCPAL65").value,D=e.getElementById("MDISCPA_MOV").value,C=e.getElementById("MDISCPAM65").value,P>t)return void alert("La edat mínima para el cálculo es de 18 años");var R=/\D/g;if(null!==_.match(R))return void alert(" Por favor, introduzca el Salario Bruto Anual - Entero, sin comas ni puntos ni decimales");if(0>=_)return void alert(" Por favor, introduzca un valor correcto como Salario Bruto Anual.");if(1==l&&0===Number(u))return void alert('La situación familiar "1" exige que el contribuyente tenga al menos un descendiente que dé derecho a la reducción de la tributación conjunta para familiasa monoparentales.');var V=G$(t,_,i,s,l,a,c,r);V.setDadesFills(u,o,d)<0||V.setDiscDesc(m,E,I)<0||(V.setNumAsc(h,S,g),V.setDiscAsc(B,D,C)<0||(y=V.souB-V.getSS()-V.calculRIRPF(),v=y/12,M=V.calculTIRPF(),n=calculPagues14(_,V.getSS(),M),N=calculPExtra(_,M),F=V.calculGD(),e.getElementById("iSB").value=Number(V.getSou()).toLocaleString("es")+"€",e.getElementById("iSN").value=Number(y.toFixed(2)).toLocaleString("es")+"€",e.getElementById("iSM").value=Number(v.toFixed(2)).toLocaleString("es")+"€",e.getElementById("iSM14").value=Number(n.toFixed(2)).toLocaleString("es")+"€",e.getElementById("iSMPE").value=Number(N.toFixed(2)).toLocaleString("es")+"€",e.getElementById("iRN").value=Number(M.toFixed(2)).toLocaleString("es")+"%",e.getElementById("iRI").value=Number((M*_/100).toFixed(2)).toLocaleString("es")+"€",e.getElementById("iSS").value=Number(V.calculSS().toFixed(2)).toLocaleString("es")+"€",e.getElementById("iBR").value=Number(V.calculBIRPF().toFixed(2)).toLocaleString("es")+"€",e.getElementById("iMPF").value=Number(V.calcularMPF().toFixed(2)).toLocaleString("es")+"€",e.getElementById("iDG").value=Number(F.toFixed(2)).toLocaleString("es")+"€",e.getElementById("iRORT").value=Number(V.getRNT().toFixed(2)).toLocaleString("es")+"€",$("#Resultats").show(),"1"===O?($("#14pagues").hide(),$("#12pagues").show()):($("#12pagues").hide(),$("#14pagues").show())))}function calculPagues14(e,t,n){var i=e/14,s=t/12,l=i*(n/100);return i-s-l}function calculPExtra(e,t){var n=e/14,i=n*(t/100);return n-i}function changeState(e){var t=e.getElementById("DISC_GEN_CONT").checked;t===!0?e.getElementById("MOV_RED").disabled=!1:(e.getElementById("MOV_RED").disabled=!0,e.getElementById("MOV_RED").checked=!1)}function changeState_DISC_CONT(e,t){"lDISC_65_CONT"===t.id?(e.getElementById("DISC_65_CONT").checked=!0,e.getElementById("NO_DISC").checked=!1,e.getElementById("DISC_GEN_CONT").checked=!1,e.getElementById("MOV_RED").disabled=!0,e.getElementById("MOV_RED").checked=!1):"lNO_DISC"===t.id?(e.getElementById("DISC_65_CONT").checked=!1,e.getElementById("NO_DISC").checked=!0,e.getElementById("DISC_GEN_CONT").checked=!1,e.getElementById("MOV_RED").disabled=!0,e.getElementById("MOV_RED").checked=!1):(e.getElementById("DISC_65_CONT").checked=!1,e.getElementById("NO_DISC").checked=!1,e.getElementById("DISC_GEN_CONT").checked=!0,e.getElementById("MOV_RED").disabled=!1)}function changeState_movD(e){var t=e.getElementById("MDISCPDL65").value;t>0?e.getElementById("MDISCPD_MOV").disabled=!1:(e.getElementById("MDISCPD_MOV").disabled=!0,e.getElementById("MDISCPD_MOV").value=0)}function changeState_movA(e){var t=e.getElementById("MDISCPAL65").value;t>0?e.getElementById("MDISCPA_MOV").disabled=!1:(e.getElementById("MDISCPA_MOV").disabled=!0,e.getElementById("MDISCPA_MOV").value=0)}!function(e,t){function n(e){var t=0;return t=e<v.trams[0]?e*v.retencio[0]:e<v.trams[1]?v.trams[0]*v.retencio[0]+(e-v.trams[0])*v.retencio[1]:e<v.trams[2]?v.trams[0]*v.retencio[0]+(v.trams[1]-v.trams[0])*v.retencio[1]+(e-v.trams[1])*v.retencio[2]:e<v.trams[3]?v.trams[0]*v.retencio[0]+(v.trams[1]-v.trams[0])*v.retencio[1]+(v.trams[2]-v.trams[1])*v.retencio[2]+(e-v.trams[2])*v.retencio[3]:v.trams[0]*v.retencio[0]+(v.trams[1]-v.trams[0])*v.retencio[1]+(v.trams[2]-v.trams[1])*v.retencio[2]+(v.trams[3]-v.trams[2])*v.retencio[3]+(e-v.trams[3])*v.retencio[4]}function i(e,t){var n=0;return 2==e?n=y+_:1==e&&(n=t===!0?C+_:C),n}function s(e,t,n){var i=0;switch(Number(e)){case 0:i=0;break;case 1:i=O[1];break;case 2:i=O[1]+O[2];break;case 3:i=O[1]+O[2]+O[3];break;default:i=O[1]+O[2]+O[3]+O[4]*e}return t>0&&(i+=t*N),n===!1&&(i/=2),i}function l(e,t,n,i){var s=0,l=0,a=0;return e>0&&(s=t>0?e*(C+_):e*C),n>0&&(l=n*(y+_)),a=s+l,i===!1&&(a/=2),a}function a(e,t,n){var i=0;return i=e*F+t*(f+F)+n*F}function c(e,t,n){var i=0,s=0,l=0;return e>0&&(i=t>0?e*(C+_):e*C),n>0&&(s=n*(y+_)),l=i+s}function r(e,t){var n=0;return 11250>=e-t?n=3700:14450>=e-t&&(n=3700-1.15625*(e-t-11250)),u===!0&&console.log("RNT: "+n),n}var u=!1,o=function(e,t,n,i,s,l,a,c){return new o.init(e,t,n,i,s,l,a,c)},d=[1051.5,872.1,758.7,753,753,753,753],m=43704,I=.0635,E=.064,h=2e3,S=2e3,g=5550,B=3500,D=7750,C=3e3,_=3e3,y=9e3,v={trams:[12450,20200,35200,6e4],retencio:[.19,.24,.3,.37,.45]},O=[0,2400,2700,4e3,4500],M=600,N=2800,F=1150,f=1400,P={situacio1:[0,14266,15803],situacio2:[13696,14985,17138],situacio3:[12e3,12607,13275]};o.prototype={getEdat:function(){return this.edat},getSou:function(){return this.souB},getSS:function(){return this.SS},calculSS:function(){var e=0,t=this.souB;return this.souB>m?t=m:this.souB<12*this.C&&(t=12*this.C),e=this.indefinit===!0?t*I:t*E,this.nSS=e||0,e},calculBIRPF:function(){var e=0;return e=this.MOV_GEO===!0?this.souB-this.nSS-h-S:this.souB-this.nSS-h,1==this.D_CONT?e-=this.D_CONT_MOV===!0?D:B:2==this.D_CONT&&(e-=D),this.nFills>2&&(e-=M),e-=r(this.souB,this.nSS),0>e&&(e=0),e},calcularRet1:function(){var e=this.calcularMPF();return n(e)},calcularMPF:function(){var e=0,t=0;return t=this.edat<65?g:this.edat<75?g+F:g+F+f,e=t,e+=i(this.D_CONT,this.D_CONT_MOV),e+=s(this.nFills,this.nless3,this.exclusiu),e+=l(this.nFills_disc_gen,this.nFill_Mov,this.nFills_disc_More65,this.exclusiu),e+=a(this.ASC65,this.ASC75,this.ASCLESS65D),e+=c(this.nDISCPAL65,this.nDISCPA_MOV,this.nDISCPAM65),u===!0&&console.log("MPF: "+e),e},calcularRet2:function(){return n(this.calculBIRPF())},calculRIRPF:function(){var e=this.calcularRet2(),t=this.calcularRet1(),n=e-t;return 0>n&&(n=0),n},calculTIRPF:function(){var e=0,t=!1;if(this.souB<P.situacio1[2]&&("1"===this.SF?"1"===this.nFills&&this.souB<P.situacio1[1]?t=!0:this.nFills>1&&this.souB<P.situacio1[2]&&(t=!0):2===this.SF?(0===this.nFills&&this.souB<P.situacio2[0]&&(t=!0),1===this.nFills&&this.souB<P.situacio2[1]?t=!0:this.nFills>1&&this.souB<P.situacio2[2]&&(t=!0)):(0===this.nFills&&this.souB<P.situacio3[0]&&(t=!0),1===this.nFills&&this.souB<P.situacio3[1]?t=!0:this.nFills>1&&this.souB<P.situacio3[2]&&(t=!0))),t===!0)return 0;var n=this.calculRIRPF();return n>0&&(e=n/this.souB),Math.floor(1e4*e)/100},calculGD:function(){var e=0;return e=this.SS+h,this.MOV_GEO&&(e+=S),2==this.D_CONT?e+=D:1==this.D_CONT&&(e+=this.D_CONT_MOV===!0?D:B),e},getRNT:function(){return r(this.souB,this.nSS)},setDadesFills:function(e,t,n){var i=this;return i.nFills=e||0,i.nless3=t||0,i.exclusiu=n||!1,t>e?(alert("El número de descendientes menores de 3 años no puede ser superior al número de descendientes totales"),-1):0},/*PauPujol-Ewamfy*/setDiscDesc:function(e,t,n){var i=this;i.nFills_disc_gen=e||0,i.nFill_Mov=t||0,i.nFills_disc_More65=n||0;var s=parseInt(e)+parseInt(n);return s>this.nFills?(alert("El número de descendientes con discapacidad no puede ser superior al número de descendientes totales"),-1):s},setNumAsc:function(e,t,n){var i=this;i.ASC65=e||0,i.ASC75=t||0,i.ASCLESS65D=n||0},setDiscAsc:function(e,t,n){var i,s,l=this;return l.nDISCPAL65=e||0,l.nDISCPA_MOV=t||0,l.nDISCPAM65=n||0,this.nDISCPA_MOV>this.nDISCPAL65?(alert("El número de personas Ascendientes con movilidad reducida no puede ser superior al número de personas con discapacidad general"),-1):(i=parseInt(this.ASC65)+parseInt(this.ASC75)+parseInt(this.ASCLESS65D),s=parseInt(this.nDISCPAL65)+parseInt(this.nDISCPA_MOV)+parseInt(this.nDISCPAM65),s>i?(alert("El número de personas Ascendientes con discapacidad no puede ser superior al número total de personas ascendientes"),-1):0)}},o.init=function(e,t,n,i,s,l,a,c,r,u,o){var m=this;m.edat=e,m.souB=t||0,m.indefinit=n||!0,m.C=d[i]||d[0],m.SF=s||3,m.MOV_GEO=l||!1,m.D_CONT=a||0,m.D_CONT_MOV=c||!1,m.nFills=r||0,m.nless3=u||0,m.exclusiu=o||!1,m.SS=m.calculSS()},o.init.prototype=o.prototype,e.Sounet=e.G$=o}(window,jQuery),$("#Resultats").hide(),$("#lMOV_RED").click(function(){document.getElementById("MOV_RED").disabled===!1&&(document.getElementById("MOV_RED").checked===!0?document.getElementById("MOV_RED").checked=!1:document.getElementById("MOV_RED").checked=!0)}),$("#lCONTRACTEINDEFINIT").click(function(){document.getElementById("CONTRACTEINDEFINIT").checked===!0?document.getElementById("CONTRACTEINDEFINIT").checked=!1:document.getElementById("CONTRACTEINDEFINIT").checked=!0}),$("#lMOV_GEO").click(function(){document.getElementById("MOV_GEO").checked===!0?document.getElementById("MOV_GEO").checked=!1:document.getElementById("MOV_GEO").checked=!0}),$("#lEXCLUSIVE").click(function(){document.getElementById("EXCLUSIVE").checked===!0?document.getElementById("EXCLUSIVE").checked=!1:document.getElementById("EXCLUSIVE").checked=!0});